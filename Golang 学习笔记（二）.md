## Golang 学习笔记（二）

### 流程控制

- 条件语句：用于条件判断，对应的关键字有 `if`、`else` 和 `else if`；
- 选择语句：用于分支选择，对应的关键字有 `switch`、`case` 和 `select`（用于通道，后面介绍协程时会提到）；
- 循环语句：用于循环迭代，对应的关键字有 `for` 和 `range`；
- 跳转语句：用于代码跳转，对应的关键字有 `goto`。

与 PHP 相比，关于 Go 语言的条件语句，需要注意以下几点： 

- 条件语句不需要使用圆括号将条件包含起来 `()`；
- 无论语句体内有几条语句，花括号 `{}` 都是必须存在的；
- 左花括号 `{` 必须与 `if` 或者 `else` 处于同一行；
- 在 `if` 之后，条件语句之前，可以添加变量初始化语句，使用 `;` 间隔，比如上述代码可以这么写 `if score := 100; score > 90 {`

### 函数

#### 函数定义

```go
func add(a,b int) int {
  return a + b
}
```

在跨包调用时，只有首字母大写的函数才可以被调用，这个涉及到包的可见性，后面在介绍面向对象时会详细讨论这个，这里你只需要了解首字母大写的 Go 函数即相当于其它语言的 public 函数，Go 语言中没有 `public`、`protected`、`private` 之类的关键字，它是通过首字母的大小写来区分可见性：首字母小写的函数只能在同一个包中访问，首字母大写的函数才可以在其他包中调用，Go 文件中定义的全局变量也是如此。

#### 多返回值及返回值命名

Go 语言函数与其他编程语言一大不同之处在于支持多返回值，这在处理程序出错的时候非常有用，比如，如果上述 `add` 函数只支持非负整数相加，传入负数则会报错，换做是在其他语言如 PHP 中，我们需要对返回结果做各种判断，才能实现预期的效果，在 Go 语言中，只需要通过在返回值中多返回一个错误信息即可：

```go
func add(a, b *int) (int, error) {
    if (*a < 0 || *b < 0) {
        err := errors.New("只支持非负整数相加")
        return 0, err
    }
    *a *= 2
    *b *= 3
    return *a + *b, nil
}

func main()  {
    x, y := -1, 2
    z, err := add(&x, &y)
    if (err != nil) {
        fmt.Println(err.Error())
        return
    }
    fmt.Printf("add(%d, %d) = %d\n", x, y, z)
}
```

此外，在设置多返回值时，还可以对返回值进行变量命名，这样，我们就可以在函数中直接对返回值变量进行赋值，而不必每次都按照指定的返回值格式返回多个变量了：

```go
func add(a, b *int) (c int, err error) {
    if (*a < 0 || *b < 0) {
        err = errors.New("只支持非负整数相加")
        return
    }
    *a *= 2
    *b *= 3
    c = *a + *b
    return
}
//这种机制避免了每次进行 return 操作时都要关注函数需要返回哪些返回值，为开发者节省了精力，尤其是在复杂的函数中。
```

